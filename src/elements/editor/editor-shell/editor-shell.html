<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../shared-styles.html">

<link rel="import" href="../../../../bower_components/paper-button/paper-button.html">

<link rel="import" href="../editor-loader/editor-loader.html">
<link rel="import" href="../editor-dependencies/editor-dependencies.html">
<link rel="import" href="../editor-material/editor-material.html">

<link rel="import" href="editor-shell-styles.html">

<dom-module id="editor-shell">
  <template>
    <style include="shared-styles"></style>
    <style include="editor-shell-styles"></style>

    <iron-ajax
        auto
        url="/src/data/material-list.json"
        handle-as="json"
        on-response="_onMaterialListLoaded"
        debounce-duration="300">
    </iron-ajax>

    <editor-dependencies id="dependencies" loading></editor-dependencies>
    <editor-scene material="[[material]]" clear-color="0xffc626" loading="{{loading}}" controls></editor-scene>

    <div class="materials">
      <!-- Loop through the main list -->
      <template is="dom-repeat" items="[[materialList]]" as="categories">
        <!-- Loop through the categories -->
        <template is="dom-repeat" items="[[categories.category]]" as="category">
          <h3>{{category.name}}</h3>
          <!-- Loop through the materials -->
          <template is="dom-repeat" items="[[category.materials]]">
            <editor-material material-properties="{{item}}"></editor-material>
          </template>
        </template>
      </template>
    </div>

    <editor-loader state="[[loading]]"></editor-loader>
  </template>

  <script src="editor-shell.js"></script>
</dom-module>
